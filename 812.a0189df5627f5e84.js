"use strict";(self.webpackChunkTAKUv2=self.webpackChunkTAKUv2||[]).push([[812],{4812:(L,u,r)=>{r.r(u),r.d(u,{LoginModule:()=>T});var m=r(6019),f=r(8239),g=r(5304),o=r(1514);let b=(()=>{class e{constructor(t){this.data=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(g.WI))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-avisologin"]],decls:2,vars:1,consts:[[1,"text-white"]],template:function(t,n){1&t&&(o.TgZ(0,"p",0),o._uU(1),o.qZA()),2&t&&(o.xp6(1),o.Oqu(n.data.message))},styles:[""]}),e})();var p=r(7207),a=r(7537),Z=r(8260),y=r(4522);let v=(()=>{class e{constructor(t,n){this.http=t,this.router=n}login(t,n){var l=this;return(0,f.Z)(function*(){return yield new Promise(s=>{l.http.post(`${Z.N.endpoint}login/authenticate`,{nombreUsuario:t,pass:n},{observe:"response"}).subscribe({next:c=>s(c),error:c=>s(c)})})})()}checkLocalStorage(){localStorage.getItem("token")&&localStorage.getItem("isSupervisor")&&this.router.navigate(["/index"])}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(y.eN),o.LFG(p.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})();function C(e,i){1&e&&o._UZ(0,"span",16)}const A=[{path:":cod",component:(()=>{class e{constructor(t,n,l,d,s){this.dialog=t,this.params=n,this.fb=l,this.service=d,this.router=s,this.version=1,this.form=this.fb.group({nombreUsuario:[],pass:[]}),this.loading=!1}ngOnInit(){const{cod:t}=this.params.snapshot.params;switch(t){case"1":this.openDialog("Sesi\xf3n expirada");break;case"2":this.openDialog("Error obteniendo datos de localStorage")}this.dialog.closeAll(),this.service.checkLocalStorage()}openDialog(t){this.dialog.open(b,{data:{message:t}})}login(){var t=this;return(0,f.Z)(function*(){var n,l,d;t.loading=!0;const s=yield t.service.login(t.form.controls.nombreUsuario.value,t.form.controls.pass.value);switch(s.status){case 200:const c=null===(n=s.body)||void 0===n?void 0:n.DiasRestantes,h=null===(l=s.body)||void 0===l?void 0:l.isSupervisor;h||(c>0&&c<=5&&t.openDialog(`Dias restantes: ${c}`),0==c&&t.openDialog("Su suscripci\xf3n termina hoy. Contacte con el administrador")),localStorage.setItem("token",null===(d=s.body)||void 0===d?void 0:d.token),localStorage.setItem("isSupervisor",`${h}`),localStorage.setItem("username",`${t.form.controls.nombreUsuario.value}`),t.router.navigate(["/index"]);break;case 400:t.openDialog(s.error.Message)}t.loading=!1})()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(g.uw),o.Y36(p.gz),o.Y36(a.qu),o.Y36(v),o.Y36(p.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-loginpage"]],decls:19,vars:4,consts:[[1,"container","animate__animated","animate__fadeIn"],[1,"row","justify-content-md-center"],[3,"formGroup"],[1,"col-10","col-sm-8","col-md-6","col-lg-4","position-absolute","top-50","start-50","translate-middle"],["src","./assets/takulogin.png",1,"rounded-pill","border","border-info","start-50","translate-middle"],[1,"card","text-white","bg-dark","border","border-info","rounded-3"],[1,"card-header","text-center","text-info","fw-bold"],[1,"display-6"],[1,"card-body"],["type","text","formControlName","nombreUsuario","placeholder","Nombre de usuario",1,"form-control","mb-3","border","border-info","rounded-3"],["type","password","formControlName","pass","placeholder","Contrase\xf1a",1,"form-control","mb-3","border","border-info","rounded-3"],[1,"d-grid","gap-2","col-6","mx-auto"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"footer"],[1,"fw-lighter"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"form",2),o.TgZ(3,"div",3),o._UZ(4,"img",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"h1",7),o._uU(8,"Iniciar Sesi\xf3n"),o.qZA(),o.qZA(),o.TgZ(9,"div",8),o._UZ(10,"input",9),o._UZ(11,"input",10),o.TgZ(12,"div",11),o.TgZ(13,"button",12),o.NdJ("click",function(){return n.login()}),o.YNc(14,C,1,0,"span",13),o._uU(15," Entrar "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"div",14),o.TgZ(17,"p",15),o._uU(18),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Q6J("formGroup",n.form),o.xp6(11),o.Q6J("disabled",n.loading),o.xp6(1),o.Q6J("ngIf",n.loading),o.xp6(4),o.hij("taku vw",n.version,""))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,m.O5],styles:["img[_ngcontent-%COMP%]{width:100px;height:100px;position:inherit;z-index:1;top:-30px}.card[_ngcontent-%COMP%]{padding-top:15px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0px;color:#fff}.footer[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})()},{path:"**",pathMatch:"full",redirectTo:"0"}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[v],imports:[[m.ez,g.Is,a.u5,a.UX,p.Bz.forChild(A)]]}),e})()}}]);