"use strict";(self.webpackChunkTAKUv2=self.webpackChunkTAKUv2||[]).push([[540],{540:(Qi,X,m)=>{m.r(X),m.d(X,{MobileModule:()=>Yi});var h=m(6019),y=m(7207),b=m(8239),t=m(1514),C=m(4653);function Rt(o,n){1&o&&(t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"span",3),t._uU(3,"Loading..."),t.qZA(),t.qZA(),t.qZA())}let M=(()=>{class o{constructor(){this.showLoading=!1}ngOnInit(){setTimeout(()=>{this.showLoading=!0},400)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loadingmobile"]],decls:1,vars:1,consts:[["class","position-absolute top-50 start-50 translate-middle animate__animated animate__fadeIn",4,"ngIf"],[1,"position-absolute","top-50","start-50","translate-middle","animate__animated","animate__fadeIn"],["role","status",1,"spinner-border","text-info",2,"width","70px","height","70px","border-width","5px"],[1,"visually-hidden"]],template:function(e,i){1&e&&t.YNc(0,Rt,4,0,"div",0),2&e&&t.Q6J("ngIf",i.showLoading)},directives:[h.O5],styles:[""]}),o})();function Et(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().irUbicacion(a.Id)}),t.TgZ(3,"div",4),t.TgZ(4,"h5",5),t._uU(5),t.qZA(),t.TgZ(6,"p",6),t._uU(7," Clientes: "),t.TgZ(8,"span",7),t._uU(9),t._UZ(10,"i",8),t.qZA(),t.qZA(),t.TgZ(11,"p",6),t._uU(12," Caja: "),t.TgZ(13,"span",7),t._uU(14),t.ALo(15,"number"),t._UZ(16,"i",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(5),t.Oqu(e.Nombre),t.xp6(4),t.hij("",e.cantClient," "),t.xp6(5),t.hij("",t.xi3(15,3,e.CajaChica,"1.0-2")," ")}}let Mt=(()=>{class o{constructor(e){this.router=e}ngOnInit(){}irUbicacion(e){this.router.navigate([`/index/worker/mobile/location/${e}`])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cardsubicacionesmobile"]],inputs:{ubicaciones:"ubicaciones"},decls:1,vars:1,consts:[["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col"],[1,"card","border-info","mb-3",3,"click"],[1,"card-body","bg-dark","text-white"],[1,"card-title","text-center","text-info"],[1,"card-text"],[1,"text-info"],[1,"bi","bi-people-fill"],[1,"bi","bi-coin"]],template:function(e,i){1&e&&t.YNc(0,Et,17,6,"div",0),2&e&&t.Q6J("ngForOf",i.ubicaciones)},directives:[h.sg],pipes:[h.JJ],styles:[""]}),o})(),Ot=(()=>{class o{constructor(){}ngOnInit(){}cambiarColor(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-workermobile"]],decls:0,vars:0,template:function(e,i){},styles:[""]}),o})();function qt(o,n){1&o&&t._UZ(0,"app-loadingmobile")}function Lt(o,n){if(1&o&&(t.TgZ(0,"div",2),t._UZ(1,"app-cardsubicacionesmobile",3),t._UZ(2,"app-workermobile"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ubicaciones",e.listaUbicaciones)}}let Ut=(()=>{class o{constructor(e){this.http=e,this.cargandoUbicaciones=!0,this.listaUbicaciones=[]}ngOnInit(){var e=this;return(0,b.Z)(function*(){const i=yield e.http.get("ubicacion/getUbicaciones");200===i.status?e.listaUbicaciones=i.body:e.http.eject(),e.cargandoUbicaciones=!1})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboardmobile"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["cardsUbicaciones",""],[1,"mt-2","animate__animated","animate__fadeIn"],[3,"ubicaciones"]],template:function(e,i){if(1&e&&(t.YNc(0,qt,1,0,"app-loadingmobile",0),t.YNc(1,Lt,3,1,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.cargandoUbicaciones)("ngIfElse",s)}},directives:[h.O5,M,Mt,Ot],styles:[""]}),o})();var l=m(7537),Bt=m(1173),F=m(7970),_=m(5304),Nt=m(7219),jt=m(5711),tt=m(6731),Ft=m(86);m(9814);let Ht=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[Nt.U8,jt.eL,h.ez,Ft.ot,tt.BQ],tt.BQ]}),o})();var J=m(5705),k=m(928),g=m(348),et=m(3448),f=m(273),A=m(7908),zt=m(2210),Vt=m(9417),$t=m(5499),it=m(8305),nt=m(3719),O=m(6263),Y=m(3970),Wt=m(4753),ot=m(9468),Kt=m(7384),Xt=m(3067),st=m(8290);function H(o,n,e){for(let i in n)if(n.hasOwnProperty(i)){const s=n[i];s?o.setProperty(i,s,(null==e?void 0:e.has(i))?"important":""):o.removeProperty(i)}return o}function w(o,n){const e=n?"":"none";H(o.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function at(o,n,e){H(o.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},e)}function q(o,n){return n&&"none"!=n?o+" "+n:o}function rt(o){const n=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*n}function Q(o,n){return o.getPropertyValue(n).split(",").map(i=>i.trim())}function z(o){const n=o.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function V(o,n,e){const{top:i,bottom:s,left:a,right:r}=o;return e>=i&&e<=s&&n>=a&&n<=r}function P(o,n,e){o.top+=n,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function ct(o,n,e,i){const{top:s,right:a,bottom:r,left:c,width:d,height:p}=o,u=d*n,v=p*n;return i>s-v&&i<r+v&&e>c-u&&e<a+u}class lt{constructor(n,e){this._document=n,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),n.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:z(e)})})}handleScroll(n){const e=(0,k.sA)(n),i=this.positions.get(e);if(!i)return null;const s=i.scrollPosition;let a,r;if(e===this._document){const p=this._viewportRuler.getViewportScrollPosition();a=p.top,r=p.left}else a=e.scrollTop,r=e.scrollLeft;const c=s.top-a,d=s.left-r;return this.positions.forEach((p,u)=>{p.clientRect&&e!==u&&e.contains(u)&&P(p.clientRect,c,d)}),s.top=a,s.left=r,{top:c,left:d}}}function dt(o){const n=o.cloneNode(!0),e=n.querySelectorAll("[id]"),i=o.nodeName.toLowerCase();n.removeAttribute("id");for(let s=0;s<e.length;s++)e[s].removeAttribute("id");return"canvas"===i?mt(o,n):("input"===i||"select"===i||"textarea"===i)&&ht(o,n),pt("canvas",o,n,mt),pt("input, textarea, select",o,n,ht),n}function pt(o,n,e,i){const s=n.querySelectorAll(o);if(s.length){const a=e.querySelectorAll(o);for(let r=0;r<s.length;r++)i(s[r],a[r])}}let ee=0;function ht(o,n){"file"!==n.type&&(n.value=o.value),"radio"===n.type&&n.name&&(n.name=`mat-clone-${n.name}-${ee++}`)}function mt(o,n){const e=n.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch(i){}}const ut=(0,k.i$)({passive:!0}),gt=(0,k.i$)({passive:!1}),G=new Set(["position"]);class ne{constructor(n,e,i,s,a,r){this._config=e,this._document=i,this._ngZone=s,this._viewportRuler=a,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new f.x,this._pointerMoveSubscription=A.w0.EMPTY,this._pointerUpSubscription=A.w0.EMPTY,this._scrollSubscription=A.w0.EMPTY,this._resizeSubscription=A.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new f.x,this.started=new f.x,this.released=new f.x,this.ended=new f.x,this.entered=new f.x,this.exited=new f.x,this.dropped=new f.x,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const d=this._handles.find(p=>c.target&&(c.target===p||p.contains(c.target)));d&&!this._disabledHandles.has(d)&&!this.disabled&&this._initializeDragSequence(d,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const d=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(d.x-this._pickupPositionOnPage.x)+Math.abs(d.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const E=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),Z=this._dropContainer;if(!E)return void this._endDragSequence(c);(!Z||!Z.isDragging()&&!Z.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),c.preventDefault();const p=this._getConstrainedPointerPosition(d);if(this._hasMoved=!0,this._lastKnownPointerPosition=d,this._updatePointerDirectionDelta(p),this._dropContainer)this._updateActiveDropContainer(p,d);else{const u=this._activeTransform;u.x=p.x-this._pickupPositionOnPage.x+this._passiveTransform.x,u.y=p.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(u.x,u.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:p,event:c,distance:this._getDragDistance(p),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this.withRootElement(n).withParent(e.parentDragRef||null),this._parentPositions=new lt(i,a),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(n){const e=(0,g.Ig)(n);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>w(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(i=>(0,g.fI)(i)),this._handles.forEach(i=>w(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){const e=(0,g.fI)(n);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,gt),e.addEventListener("touchstart",this._pointerDown,ut)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?(0,g.fI)(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){var n,e;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null==(n=this._rootElement)||n.remove()),null==(e=this._anchor)||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),w(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),w(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){const n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){const n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var n,e;null==(n=this._preview)||n.remove(),null==(e=this._previewRef)||e.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var n,e;null==(n=this._placeholder)||n.remove(),null==(e=this._placeholderRef)||e.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){I(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,s=i.parentNode,a=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();s.insertBefore(r,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),at(i,!1,G),this._document.body.appendChild(s.replaceChild(a,i)),this._getPreviewInsertionPoint(s,c).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(n,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),s=I(e),a=!s&&0!==e.button,r=this._rootElement,c=(0,k.sA)(e),d=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),p=s?(0,et.yG)(e):(0,et.X6)(e);if(c&&c.draggable&&"mousedown"===e.type&&e.preventDefault(),i||a||d||p)return;if(this._handles.length){const D=r.style;this._rootElementTapHighlight=D.webkitTapHighlightColor||"",D.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>this._updateOnScroll(D)),this._boundaryElement&&(this._boundaryRect=z(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(n,e);const v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(n){at(this._rootElement,!0,G),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),s=this._getPointerPositionOnPage(n),a=this._getDragDistance(s),r=e._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:a,dropPoint:s}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:a,dropPoint:s}),e.drop(this,i,this._initialIndex,this._initialContainer,r,a,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:e},{x:i,y:s}){let a=this._initialContainer._getSiblingContainerFromPosition(this,n,e);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,e)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,n,e,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,s),this._dropContainer._sortItem(this,n,e,this._pointerDirectionDelta),this._applyPreviewTransform(n-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const n=this._previewTemplate,e=this.previewClass,i=n?n.template:null;let s;if(i&&n){const a=n.matchSize?this._rootElement.getBoundingClientRect():null,r=n.viewContainer.createEmbeddedView(i,n.context);r.detectChanges(),s=ft(r,this._document),this._previewRef=r,n.matchSize?bt(s,a):s.style.transform=L(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const a=this._rootElement;s=dt(a),bt(s,a.getBoundingClientRect()),this._initialTransform&&(s.style.transform=this._initialTransform)}return H(s.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},G),w(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(a=>s.classList.add(a)):s.classList.add(e)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const n=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);const e=function(o){const n=getComputedStyle(o),e=Q(n,"transition-property"),i=e.find(c=>"transform"===c||"all"===c);if(!i)return 0;const s=e.indexOf(i),a=Q(n,"transition-duration"),r=Q(n,"transition-delay");return rt(a[s])+rt(r[s])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const s=r=>{var c;(!r||(0,k.sA)(r)===this._preview&&"transform"===r.propertyName)&&(null==(c=this._preview)||c.removeEventListener("transitionend",s),i(),clearTimeout(a))},a=setTimeout(s,1.5*e);this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){const n=this._placeholderTemplate,e=n?n.template:null;let i;return e?(this._placeholderRef=n.viewContainer.createEmbeddedView(e,n.context),this._placeholderRef.detectChanges(),i=ft(this._placeholderRef,this._document)):i=dt(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(n,e){const i=this._rootElement.getBoundingClientRect(),s=n===this._rootElement?null:n,a=s?s.getBoundingClientRect():i,r=I(e)?e.targetTouches[0]:e,c=this._getViewportScrollPosition();return{x:a.left-i.left+(r.pageX-a.left-c.left),y:a.top-i.top+(r.pageY-a.top-c.top)}}_getPointerPositionOnPage(n){const e=this._getViewportScrollPosition(),i=I(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,s=i.pageX-e.left,a=i.pageY-e.top;if(this._ownerSVGElement){const r=this._ownerSVGElement.getScreenCTM();if(r){const c=this._ownerSVGElement.createSVGPoint();return c.x=s,c.y=a,c.matrixTransform(r.inverse())}}return{x:s,y:a}}_getConstrainedPointerPosition(n){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:s}=this.constrainPosition?this.constrainPosition(n,this):n;if("x"===this.lockAxis||"x"===e?s=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:a,y:r}=this._pickupPositionInElement,c=this._boundaryRect,d=this._previewRect,p=c.top+r,u=c.bottom-(d.height-r);i=_t(i,c.left+a,c.right-(d.width-a)),s=_t(s,p,u)}return{x:i,y:s}}_updatePointerDirectionDelta(n){const{x:e,y:i}=n,s=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,r=Math.abs(e-a.x),c=Math.abs(i-a.y);return r>this._config.pointerDirectionChangeThreshold&&(s.x=e>a.x?1:-1,a.x=e),c>this._config.pointerDirectionChangeThreshold&&(s.y=i>a.y?1:-1,a.y=i),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,w(this._rootElement,n))}_removeRootElementListeners(n){n.removeEventListener("mousedown",this._pointerDown,gt),n.removeEventListener("touchstart",this._pointerDown,ut)}_applyRootElementTransform(n,e){const i=L(n,e),s=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=s.transform&&"none"!=s.transform?s.transform:""),s.transform=q(i,this._initialTransform)}_applyPreviewTransform(n,e){var a;const i=(null==(a=this._previewTemplate)?void 0:a.template)?void 0:this._initialTransform,s=L(n,e);this._preview.style.transform=q(s,i)}_getDragDistance(n){const e=this._pickupPositionOnPage;return e?{x:n.x-e.x,y:n.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:e}=this._passiveTransform;if(0===n&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),s=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===s.width&&0===s.height)return;const a=i.left-s.left,r=s.right-i.right,c=i.top-s.top,d=s.bottom-i.bottom;i.width>s.width?(a>0&&(n+=a),r>0&&(n-=r)):n=0,i.height>s.height?(c>0&&(e+=c),d>0&&(e-=d)):e=0,(n!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:n})}_getDragStartDelay(n){const e=this.dragStartDelay;return"number"==typeof e?e:I(n)?e.touch:e?e.mouse:0}_updateOnScroll(n){const e=this._parentPositions.handleScroll(n);if(e){const i=(0,k.sA)(n);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&P(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const n=this._parentPositions.positions.get(this._document);return n?n.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,k.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,e){const i=this._previewContainer||"global";if("parent"===i)return n;if("global"===i){const s=this._document;return e||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return(0,g.fI)(i)}}function L(o,n){return`translate3d(${Math.round(o)}px, ${Math.round(n)}px, 0)`}function _t(o,n,e){return Math.max(n,Math.min(e,o))}function I(o){return"t"===o.type[0]}function ft(o,n){const e=o.rootNodes;if(1===e.length&&e[0].nodeType===n.ELEMENT_NODE)return e[0];const i=n.createElement("div");return e.forEach(s=>i.appendChild(s)),i}function bt(o,n){o.style.width=`${n.width}px`,o.style.height=`${n.height}px`,o.style.transform=L(n.left,n.top)}function vt(o,n,e){const i=R(n,o.length-1),s=R(e,o.length-1);if(i===s)return;const a=o[i],r=s<i?-1:1;for(let c=i;c!==s;c+=r)o[c]=o[c+r];o[s]=a}function R(o,n){return Math.max(0,Math.min(n,o))}class oe{constructor(n,e,i,s,a){this._dragDropRegistry=e,this._ngZone=s,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new f.x,this.entered=new f.x,this.exited=new f.x,this.dropped=new f.x,this.sorted=new f.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=A.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new f.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(o=0,n=zt.z){return o<0&&(o=0),(0,Vt.H)(o,o,n)}(0,$t.Z).pipe((0,O.R)(this._stopScrollTimers)).subscribe(()=>{const r=this._scrollNode,c=this.autoScrollStep;1===this._verticalScrollDirection?r.scrollBy(0,-c):2===this._verticalScrollDirection&&r.scrollBy(0,c),1===this._horizontalScrollDirection?r.scrollBy(-c,0):2===this._horizontalScrollDirection&&r.scrollBy(c,0)})},this.element=(0,g.fI)(n),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new lt(i,a)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,e,i,s){let a;this._draggingStarted(),null==s?(a=this.sortingDisabled?this._draggables.indexOf(n):-1,-1===a&&(a=this._getItemIndexFromPointerPosition(n,e,i))):a=s;const r=this._activeDraggables,c=r.indexOf(n),d=n.getPlaceholderElement();let p=r[a];if(p===n&&(p=r[a+1]),!p&&(null==a||-1===a||a<r.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(p=r[0]),c>-1&&r.splice(c,1),p&&!this._dragDropRegistry.isDragging(p)){const u=p.getRootElement();u.parentElement.insertBefore(d,u),r.splice(a,0,n)}else(0,g.fI)(this.element).appendChild(d),r.push(n);d.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,e,i,s,a,r,c){this._reset(),this.dropped.next({item:n,currentIndex:e,previousIndex:i,container:this,previousContainer:s,isPointerOverContainer:a,distance:r,dropPoint:c})}withItems(n){const e=this._draggables;return this._draggables=n,n.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(s=>s.isDragging()).every(s=>-1===n.indexOf(s))?this._reset():this._cacheItems()),this}withDirection(n){return this._direction=n,this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){return this._orientation=n,this}withScrollableParents(n){const e=(0,g.fI)(this.element);return this._scrollableElements=-1===n.indexOf(e)?[e,...n]:n.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===n):this._draggables.indexOf(n)}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,e,i,s){if(this.sortingDisabled||!this._clientRect||!ct(this._clientRect,.05,e,i))return;const a=this._itemPositions,r=this._getItemIndexFromPointerPosition(n,e,i,s);if(-1===r&&a.length>0)return;const c="horizontal"===this._orientation,d=a.findIndex(T=>T.drag===n),p=a[r],v=p.clientRect,D=d>r?1:-1,E=this._getItemOffsetPx(a[d].clientRect,v,D),Z=this._getSiblingOffsetPx(d,a,D),S=a.slice();vt(a,d,r),this.sorted.next({previousIndex:d,currentIndex:r,container:this,item:n}),a.forEach((T,Hi)=>{if(S[Hi]===T)return;const Pt=T.drag===n,K=Pt?E:Z,It=Pt?n.getPlaceholderElement():T.drag.getRootElement();T.offset+=K,c?(It.style.transform=q(`translate3d(${Math.round(T.offset)}px, 0, 0)`,T.initialTransform),P(T.clientRect,0,K)):(It.style.transform=q(`translate3d(0, ${Math.round(T.offset)}px, 0)`,T.initialTransform),P(T.clientRect,K,0))}),this._previousSwap.overlaps=V(v,e,i),this._previousSwap.drag=p.drag,this._previousSwap.delta=c?s.x:s.y}_startScrollingIfNecessary(n,e){if(this.autoScrollDisabled)return;let i,s=0,a=0;if(this._parentPositions.positions.forEach((r,c)=>{c===this._document||!r.clientRect||i||ct(r.clientRect,.05,n,e)&&([s,a]=function(o,n,e,i){const s=Tt(n,i),a=xt(n,e);let r=0,c=0;if(s){const d=o.scrollTop;1===s?d>0&&(r=1):o.scrollHeight-d>o.clientHeight&&(r=2)}if(a){const d=o.scrollLeft;1===a?d>0&&(c=1):o.scrollWidth-d>o.clientWidth&&(c=2)}return[r,c]}(c,r.clientRect,n,e),(s||a)&&(i=c))}),!s&&!a){const{width:r,height:c}=this._viewportRuler.getViewportSize(),d={width:r,height:c,top:0,right:r,bottom:c,left:0};s=Tt(d,e),a=xt(d,n),i=window}i&&(s!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=a,this._scrollNode=i,(s||a)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const n=(0,g.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const n=(0,g.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(n).clientRect}_cacheItemPositions(){const n="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:z(i)}}).sort((e,i)=>n?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const n=(0,g.fI)(this.element).style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var s;const i=e.getRootElement();if(i){const a=null==(s=this._itemPositions.find(r=>r.drag===e))?void 0:s.initialTransform;i.style.transform=a||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(n,e,i){const s="horizontal"===this._orientation,a=e[n].clientRect,r=e[n+-1*i];let c=a[s?"width":"height"]*i;if(r){const d=s?"left":"top",p=s?"right":"bottom";-1===i?c-=r.clientRect[d]-a[p]:c+=a[d]-r.clientRect[p]}return c}_getItemOffsetPx(n,e,i){const s="horizontal"===this._orientation;let a=s?e.left-n.left:e.top-n.top;return-1===i&&(a+=s?e.width-n.width:e.height-n.height),a}_shouldEnterAsFirstChild(n,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,s="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const r=i[i.length-1].clientRect;return s?n>=r.right:e>=r.bottom}{const r=i[0].clientRect;return s?n<=r.left:e<=r.top}}_getItemIndexFromPointerPosition(n,e,i,s){const a="horizontal"===this._orientation,r=this._itemPositions.findIndex(({drag:c,clientRect:d})=>{if(c===n)return!1;if(s){const p=a?s.x:s.y;if(c===this._previousSwap.drag&&this._previousSwap.overlaps&&p===this._previousSwap.delta)return!1}return a?e>=Math.floor(d.left)&&e<Math.floor(d.right):i>=Math.floor(d.top)&&i<Math.floor(d.bottom)});return-1!==r&&this.sortPredicate(r,n,this)?r:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(n,e){return null!=this._clientRect&&V(this._clientRect,n,e)}_getSiblingContainerFromPosition(n,e,i){return this._siblings.find(s=>s._canReceive(n,e,i))}_canReceive(n,e,i){if(!this._clientRect||!V(this._clientRect,e,i)||!this.enterPredicate(n,this))return!1;const s=this._getShadowRoot().elementFromPoint(e,i);if(!s)return!1;const a=(0,g.fI)(this.element);return s===a||a.contains(s)}_startReceiving(n,e){const i=this._activeSiblings;!i.has(n)&&e.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(i.add(n),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(n);e&&(this._itemPositions.forEach(({clientRect:i})=>{P(i,e.top,e.left)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const n=(0,k.kV)((0,g.fI)(this.element));this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const n=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,n))}}function Tt(o,n){const{top:e,bottom:i,height:s}=o,a=.05*s;return n>=e-a&&n<=e+a?1:n>=i-a&&n<=i+a?2:0}function xt(o,n){const{left:e,right:i,width:s}=o,a=.05*s;return n>=e-a&&n<=e+a?1:n>=i-a&&n<=i+a?2:0}const U=(0,k.i$)({passive:!1,capture:!0});let ae=(()=>{class o{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new f.x,this.pointerUp=new f.x,this.scroll=new f.x,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,U)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,U)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const s=i.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:U}),s||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:U}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,r)=>{this._document.addEventListener(r,a.handler,a.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new it.y(s=>this._ngZone.runOutsideAngular(()=>{const r=c=>{this._activeDragInstances.length&&s.next(c)};return e.addEventListener("scroll",r,!0),()=>{e.removeEventListener("scroll",r,!0)}}))),(0,nt.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.R0b),t.LFG(h.K0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const re={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let $=(()=>{class o{constructor(e,i,s,a){this._document=e,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=a}createDrag(e,i=re){return new ne(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new oe(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.K0),t.LFG(t.R0b),t.LFG(J.rL),t.LFG(ae))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const kt=new t.OlP("CDK_DRAG_PARENT"),yt=new t.OlP("CdkDropListGroup"),Zt=new t.OlP("CDK_DRAG_CONFIG");let ce=0;const wt=new t.OlP("CdkDropList");let le=(()=>{class o{constructor(e,i,s,a,r,c,d){this.element=e,this._changeDetectorRef=s,this._scrollDispatcher=a,this._dir=r,this._group=c,this._destroyed=new f.x,this.connectedTo=[],this.id="cdk-drop-list-"+ce++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.sorted=new t.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,d&&this._assignDefaults(d),this._dropListRef.enterPredicate=(p,u)=>this.enterPredicate(p.data,u.data),this._dropListRef.sortPredicate=(p,u,v)=>this.sortPredicate(p,u.data,v.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),o._dropLists.push(this),c&&c._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,g.Ig)(e)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=o._dropLists.indexOf(this);e>-1&&o._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,Y.O)(this._dir.value),(0,O.R)(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{const i=(0,g.Eq)(this.connectedTo).map(s=>"string"==typeof s?o._dropLists.find(r=>r.id===s):s);if(this._group&&this._group._items.forEach(s=>{-1===i.indexOf(s)&&i.push(s)}),!this._scrollableParentsResolved){const s=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(s),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,g.Ig)(this.sortingDisabled),e.autoScrollDisabled=(0,g.Ig)(this.autoScrollDisabled),e.autoScrollStep=(0,g.su)(this.autoScrollStep,2),e.connectedTo(i.filter(s=>s&&s!==this).map(s=>s._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:i,draggingDisabled:s,sortingDisabled:a,listAutoScrollDisabled:r,listOrientation:c}=e;this.disabled=null!=s&&s,this.sortingDisabled=null!=a&&a,this.autoScrollDisabled=null!=r&&r,this.orientation=c||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return o._dropLists=[],o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36($),t.Y36(t.sBO),t.Y36(J.mF),t.Y36(st.Is,8),t.Y36(yt,12),t.Y36(Zt,8))},o.\u0275dir=t.lG2({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,i){2&e&&(t.uIk("id",i.id),t.ekj("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[t._Bn([{provide:yt,useValue:void 0},{provide:wt,useExisting:o}])]}),o})();const St=new t.OlP("CdkDragHandle"),de=new t.OlP("CdkDragPlaceholder"),pe=new t.OlP("CdkDragPreview");let me=(()=>{class o{constructor(e,i,s,a,r,c,d,p,u,v,D){this.element=e,this.dropContainer=i,this._ngZone=a,this._viewContainerRef=r,this._dir=d,this._changeDetectorRef=u,this._selfHandle=v,this._parentDrag=D,this._destroyed=new f.x,this.started=new t.vpe,this.released=new t.vpe,this.ended=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.dropped=new t.vpe,this.moved=new it.y(E=>{const Z=this._dragRef.moved.pipe((0,Wt.U)(S=>({source:this,pointerPosition:S.pointerPosition,event:S.event,delta:S.delta,distance:S.distance}))).subscribe(E);return()=>{Z.unsubscribe()}}),this._dragRef=p.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:null==c?void 0:c.zIndex}),this._dragRef.data=this,o._dragInstances.push(this),c&&this._assignDefaults(c),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,g.Ig)(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,ot.q)(1),(0,O.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const i=e.rootElementSelector,s=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),s&&!s.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=o._dragInstances.indexOf(this);e>-1&&o._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var s;const e=this.element.nativeElement;let i=e;this.rootElementSelector&&(i=void 0!==e.closest?e.closest(this.rootElementSelector):null==(s=e.parentElement)?void 0:s.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,g.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const i=this._dir,s=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof s&&s?s:(0,g.su)(s),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(r).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe((0,ot.q)(1)).subscribe(()=>{var s;if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){e.withParent((null==(s=o._dragInstances.find(a=>a.element.nativeElement===i))?void 0:s._dragRef)||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint})})}_assignDefaults(e){const{lockAxis:i,dragStartDelay:s,constrainPosition:a,previewClass:r,boundaryElement:c,draggingDisabled:d,rootElementSelector:p,previewContainer:u}=e;this.disabled=null!=d&&d,this.dragStartDelay=s||0,i&&(this.lockAxis=i),a&&(this.constrainPosition=a),r&&(this.previewClass=r),c&&(this.boundaryElement=c),p&&(this.rootElementSelector=p),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.changes.pipe((0,Y.O)(this._handles),(0,Kt.b)(e=>{const i=e.filter(s=>s._parentDrag===this).map(s=>s.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,Xt.w)(e=>(0,nt.T)(...e.map(i=>i._stateChanges.pipe((0,Y.O)(i))))),(0,O.R)(this._destroyed)).subscribe(e=>{const i=this._dragRef,s=e.element.nativeElement;e.disabled?i.disableHandle(s):i.enableHandle(s)})}}return o._dragInstances=[],o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(wt,12),t.Y36(h.K0),t.Y36(t.R0b),t.Y36(t.s_b),t.Y36(Zt,8),t.Y36(st.Is,8),t.Y36($),t.Y36(t.sBO),t.Y36(St,10),t.Y36(kt,12))},o.\u0275dir=t.lG2({type:o,selectors:[["","cdkDrag",""]],contentQueries:function(e,i,s){if(1&e&&(t.Suo(s,pe,5),t.Suo(s,de,5),t.Suo(s,St,5)),2&e){let a;t.iGM(a=t.CRH())&&(i._previewTemplate=a.first),t.iGM(a=t.CRH())&&(i._placeholderTemplate=a.first),t.iGM(a=t.CRH())&&(i._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,i){2&e&&t.ekj("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[t._Bn([{provide:kt,useExisting:o}]),t.TTD]}),o})(),ue=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[$],imports:[J.ZD]}),o})();var B=m(8727),N=m(8167),At=m(138);let ge=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,Bt.D,l.u5,_.Is,F.vQ,Ht,ue,B.FA,N.lN,At.c]]}),o})();function _e(o,n){1&o&&t._UZ(0,"span",18)}const fe=function(o){return{"is-invalid":o}};let be=(()=>{class o{constructor(e,i,s,a){this.fb=e,this.service=i,this.dialogRef=s,this.data=a,this.error400=!1,this.agregando=!1,this.formCliente=this.fb.group({nombreCompleto:[,l.kI.pattern("^[a-zA-Z0-9]+(?: [a-zA-Z0-9]+)*$")],direccion:[],telefono:[,l.kI.pattern("^[0-9]*$")]}),this.formCuenta=this.fb.group({monto:[,l.kI.pattern("^[0-9]+$")],interes:[20],plazoEnDias:[24]}),this.cuota=0}ngOnInit(){this.formCuenta.valueChanges.subscribe(()=>{const e=parseInt(this.formCuenta.controls.monto.value);this.cuota=e&&0!=e&&e%100==0?(e+e*(this.formCuenta.controls.interes.value/100))/this.formCuenta.controls.plazoEnDias.value:0})}agregarCliente(){var e=this;return(0,b.Z)(function*(){switch(e.agregando=!0,e.dialogRef.disableClose=!0,(yield e.service.post("cliente/registrar",{nombreCompleto:e.formCliente.controls.nombreCompleto.value,direccion:e.formCliente.controls.direccion.value,telefono:e.formCliente.controls.telefono.value,idUbicacion:e.data.idUbicacion,prestamo:[{monto:e.formCuenta.controls.monto.value,interes:e.formCuenta.controls.interes.value,plazoEnDias:e.formCuenta.controls.plazoEnDias.value,cuotaDiaria:e.cuota}]})).status){case 200:e.dialogRef.close(!0);break;case 400:e.error400=!0;break;default:e.service.eject()}e.agregando=!1,e.dialogRef.disableClose=!1})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(C.j),t.Y36(_.so),t.Y36(_.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-agregarclientemobile-dialog"]],decls:30,vars:11,consts:[[1,"text-info","text-center"],[3,"formGroup"],["type","text","placeholder","Nombre","formControlName","nombreCompleto","required","",1,"form-control","border-info","mb-2",3,"ngClass"],["type","text","placeholder","Tel\xe9fono","formControlName","telefono",1,"form-control","border-info","mb-2"],["type","text","placeholder","Direcci\xf3n","formControlName","direccion",1,"form-control","border-info","mb-2"],["formControlName","plazoEnDias",1,"form-select","mb-2","border-info"],["value","24"],["value","30"],["type","text","id","exampleFormControlInput1","placeholder","Cantidad","formControlName","monto","maxlength","5","required","","autocomplete","off",1,"form-control","border-info","mb-2"],["formControlName","interes",1,"form-select","mb-2","border-info"],["value","5"],["value","10"],["value","15"],["value","20"],[1,"text-white"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Agregar cliente"),t.qZA(),t._UZ(2,"br"),t.TgZ(3,"form",1),t._UZ(4,"input",2),t._UZ(5,"input",3),t._UZ(6,"input",4),t.qZA(),t.TgZ(7,"form",1),t.TgZ(8,"select",5),t.TgZ(9,"option",6),t._uU(10,"24 d\xedas"),t.qZA(),t.TgZ(11,"option",7),t._uU(12,"30 d\xedas"),t.qZA(),t.qZA(),t._UZ(13,"input",8),t.TgZ(14,"select",9),t.TgZ(15,"option",10),t._uU(16,"5%"),t.qZA(),t.TgZ(17,"option",11),t._uU(18,"10%"),t.qZA(),t.TgZ(19,"option",12),t._uU(20,"15%"),t.qZA(),t.TgZ(21,"option",13),t._uU(22,"20%"),t.qZA(),t.qZA(),t.TgZ(23,"h3",14),t._uU(24),t.ALo(25,"number"),t.qZA(),t.qZA(),t.TgZ(26,"div",15),t.TgZ(27,"button",16),t.NdJ("click",function(){return i.agregarCliente()}),t.YNc(28,_e,1,0,"span",17),t._uU(29," Agregar "),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.formCliente),t.xp6(1),t.Q6J("ngClass",t.VKq(9,fe,i.error400)),t.xp6(3),t.Q6J("formGroup",i.formCuenta),t.xp6(17),t.hij("Cuota: ",t.xi3(25,6,i.cuota,"1.0-2"),""),t.xp6(3),t.Q6J("disabled",i.formCliente.invalid||0==i.cuota||i.agregando||i.formCuenta.invalid),t.xp6(1),t.Q6J("ngIf",i.agregando))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.Q7,h.mk,l.EJ,l.YN,l.Kr,l.nD,h.O5],pipes:[h.JJ],styles:[""]}),o})(),ve=(()=>{class o{constructor(e){this.dialogRef=e}ngOnInit(){}tipoVista(e){this.dialogRef.close(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-vistamobile-dialog"]],decls:7,vars:0,consts:[[1,"d-grid","gap-2","col-12","mx-auto"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return i.tipoVista("1")}),t._uU(2,"Pagaron hoy"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.tipoVista("2")}),t._uU(4,"No pagaron hoy"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.tipoVista("0")}),t._uU(6,"Todos"),t.qZA(),t.qZA())},styles:[""]}),o})(),Ce=(()=>{class o{constructor(){this.hoy=(new Date).setHours(0,0,0,0)}transform(e,i,s){let a=e;switch(s){case"1":a=a.filter(r=>this.verificarPago(r.Prestamo));break;case"2":a=a.filter(r=>!this.verificarPago(r.Prestamo))}return""==i||(i=i.toLowerCase(),a=a.filter(r=>r.NombreCompleto.toLowerCase().indexOf(i)>=0)),a}verificarPago(e){for(let i=0;i<e.length;i++)if(new Date(e[i].UltimoCobro).setHours(0,0,0,0)==this.hoy)return!0;return!1}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"diapagado",type:o,pure:!0}),o})();const De=["listaScroll"],Te=function(o){return{paid:o}};function xe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().irAcliente(a.Id)})("cdkDragMoved",function(s){return t.CHM(e),t.oxw().movimiento(s)})("cdkDragStarted",function(s){return t.CHM(e),t.oxw().inicioElDragAndDrop(s)})("cdkDragDropped",function(s){return t.CHM(e),t.oxw().terminoDragAndDrop(s)}),t._uU(1),t.TgZ(2,"span",18),t._uU(3),t._UZ(4,"i",19),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(4,Te,i.verificarPago(e.Prestamo)))("cdkDragDisabled",!i.reordenar),t.xp6(1),t.hij(" ",e.NombreCompleto," "),t.xp6(2),t.hij("",e.Prestamo.length," ")}}function ke(o,n){1&o&&t._UZ(0,"span",22)}function ye(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().reordenarLista()}),t.YNc(1,ke,1,0,"span",21),t._uU(2," Guardar Cambios"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.reordenando)}}function Ze(o,n){1&o&&(t.TgZ(0,"div",23),t.TgZ(1,"h2"),t._uU(2,"No hay clientes"),t.qZA(),t.qZA())}const we=function(o,n,e){return{"btn-success":o,"btn-info":n,"btn-light border border-dark":e}},Se=function(o,n){return{"btn-dark":o,"btn-success":n}};let Ae=(()=>{class o{constructor(e,i,s){this.router=e,this.dialog=i,this.service=s,this.clienteAgregado=new t.vpe,this.scrolling=new t.vpe,this.hoy=(new Date).setHours(0,0,0,0),this.terminoBusqueda="",this.reordenar=!1,this.reordenando=!1,this.scrolltop=10,this.positionY=0,this.stillScrolling=!1}ngOnInit(){this.tipoVista=localStorage.getItem("viewType")||"0"}irAcliente(e){this.reordenar||this.router.navigate([`/index/worker/mobile/customer/${e}`])}verificarPago(e){for(let i=0;i<e.length;i++)if(new Date(e[i].UltimoCobro).setHours(0,0,0,0)==this.hoy)return!0;return!1}agregarCliente(){this.dialog.open(be,{width:"80%",data:{idUbicacion:this.idUbicacion}}).afterClosed().subscribe(i=>{i&&this.clienteAgregado.emit(!0)})}vista(){this.dialog.open(ve).afterClosed().subscribe(i=>{i&&(localStorage.setItem("viewType",i),this.tipoVista=i)})}activarReordenamiento(){this.reordenar=!this.reordenar,this.tipoVista="0",localStorage.setItem("viewType","0")}movimiento(e){this.positionY=e.pointerPosition.y}inicioElDragAndDrop(e){this.stillScrolling=!0,this.moviendo()}terminoDragAndDrop(e){this.stillScrolling=!1}moviendo(){setTimeout(()=>{this.stillScrolling&&(this.positionY<.6*this.cardHeight&&this.scrolling.emit(!1),this.positionY>.8*this.cardHeight&&this.scrolling.emit(!0),this.moviendo())},10)}drop(e){vt(this.listaClientes,e.previousIndex,e.currentIndex)}reordenarLista(){var e=this;return(0,b.Z)(function*(){e.reordenando=!0;const i={lIdOrdenados:e.listaClientes.map(a=>a.Id),idUbicacion:e.idUbicacion};200===(yield e.service.post("cliente/reorder",i)).status?e.reordenar=!1:e.service.eject(),e.reordenando=!1})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.F0),t.Y36(_.uw),t.Y36(C.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-listaclientesmobile"]],viewQuery:function(e,i){if(1&e&&t.Gf(De,5),2&e){let s;t.iGM(s=t.CRH())&&(i.listaScroll=s.first)}},inputs:{idUbicacion:"idUbicacion",listaClientes:"listaClientes",cardHeight:"cardHeight"},outputs:{clienteAgregado:"clienteAgregado",scrolling:"scrolling"},decls:21,vars:20,consts:[[1,"row","m-1","fijo"],[1,"col","m-1"],["type","text","placeholder","Filtrar",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-3","d-grid","gap-2","me-2"],["type","button",1,"btn","btn-dark",3,"disabled","click"],[1,"bi","bi-person-plus-fill"],["type","button",1,"btn",3,"ngClass","disabled","click"],[1,"bi","bi-eye-fill"],["type","button",1,"btn",3,"ngClass","click"],[1,"bi","bi-list-columns-reverse"],[1,"list-group","list-group-flush","bg-transparent"],["cdkDropList","","id","listaScroll",1,"list",3,"cdkDropListAutoScrollStep","cdkDropListDropped"],["listaScroll",""],["class","list-group-item d-flex justify-content-between align-items-center","cdkDrag","",3,"ngClass","cdkDragDisabled","click","cdkDragMoved","cdkDragStarted","cdkDragDropped",4,"ngFor","ngForOf"],["type","button","class","btn btn-info btn-guardar",3,"click",4,"ngIf"],["class","text-center",4,"ngIf"],["cdkDrag","",1,"list-group-item","d-flex","justify-content-between","align-items-center",3,"ngClass","cdkDragDisabled","click","cdkDragMoved","cdkDragStarted","cdkDragDropped"],[1,"text-dark"],[1,"bi","bi-card-text"],["type","button",1,"btn","btn-info","btn-guardar",3,"click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"input",2),t.NdJ("ngModelChange",function(a){return i.terminoBusqueda=a}),t.qZA(),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.agregarCliente()}),t._UZ(7,"i",6),t.qZA(),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"button",7),t.NdJ("click",function(){return i.vista()}),t._UZ(10,"i",8),t.qZA(),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.activarReordenamiento()}),t._UZ(13,"i",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12,13),t.NdJ("cdkDropListDropped",function(a){return i.drop(a)}),t.YNc(17,xe,5,6,"li",14),t.ALo(18,"diapagado"),t.qZA(),t.qZA(),t.YNc(19,ye,3,1,"button",15),t.YNc(20,Ze,3,0,"div",16)),2&e&&(t.xp6(2),t.Q6J("ngModel",i.terminoBusqueda),t.xp6(4),t.Q6J("disabled",i.reordenar),t.xp6(3),t.Q6J("ngClass",t.kEZ(13,we,"0"==i.tipoVista,"1"==i.tipoVista,"2"==i.tipoVista))("disabled",i.reordenar),t.xp6(3),t.Q6J("ngClass",t.WLB(17,Se,!i.reordenar,i.reordenar)),t.xp6(3),t.Q6J("cdkDropListAutoScrollStep",i.scrolltop),t.xp6(2),t.Q6J("ngForOf",t.Dn7(18,9,i.listaClientes,i.terminoBusqueda,i.tipoVista)),t.xp6(2),t.Q6J("ngIf",i.reordenar),t.xp6(1),t.Q6J("ngIf",0==i.listaClientes.length))},directives:[l.Fj,l.JJ,l.On,h.mk,le,h.sg,h.O5,me],pipes:[Ce],styles:[".paid[_ngcontent-%COMP%]{background:linear-gradient(to left,#dce2e7,#0dcaf0)}.btn-guardar[_ngcontent-%COMP%]{position:fixed;bottom:5%;right:5%}.fijo[_ngcontent-%COMP%]{position:fixed;z-index:1}.list[_ngcontent-%COMP%]{margin-top:50px}"]}),o})();function Pe(o,n){1&o&&t._UZ(0,"span",10)}let Ie=(()=>{class o{constructor(e,i,s,a){this.data=e,this.dialogRef=i,this.fb=s,this.service=a,this.cargando=!1,this.form=this.fb.group({tipo:[0],monto:["",l.kI.pattern("^[0-9]+$")],detalle:[]})}ngOnInit(){}agregarTransaccion(){var e=this;return(0,b.Z)(function*(){e.dialogRef.disableClose=!0,e.cargando=!0,yield e.service.post("transaccion/registrar",{detalle:e.form.controls.detalle.value,monto:e.form.controls.monto.value*(1==e.form.controls.tipo.value?-1:1),idUbicacion:e.data.idUbicacion}),e.dialogRef.close(!0)})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.WI),t.Y36(_.so),t.Y36(l.qu),t.Y36(C.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-transaccionesmobile-dialog"]],decls:15,vars:3,consts:[[1,"text-info","text-center"],[3,"formGroup"],["formControlName","tipo",1,"form-select","mb-2","border-info"],["value","0"],["value","1"],["type","text","id","exampleFormControlInput1","placeholder","Cantidad","formControlName","monto","maxlength","5","autocomplete","off","required","",1,"form-control","border-info","mb-3"],["id","exampleFormControlTextarea1","rows","3","placeholder","Detalle","formControlName","detalle","required","",1,"form-control","border-info","mb-3"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Agregar transacci\xf3n"),t.qZA(),t._UZ(2,"br"),t.TgZ(3,"form",1),t.TgZ(4,"select",2),t.TgZ(5,"option",3),t._uU(6,"Ingreso"),t.qZA(),t.TgZ(7,"option",4),t._uU(8,"Gasto"),t.qZA(),t.qZA(),t._UZ(9,"input",5),t._UZ(10,"textarea",6),t.TgZ(11,"div",7),t.TgZ(12,"button",8),t.NdJ("click",function(){return i.agregarTransaccion()}),t.YNc(13,Pe,1,0,"span",9),t._uU(14," Agregar "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(9),t.Q6J("disabled",i.cargando||i.form.invalid),t.xp6(1),t.Q6J("ngIf",i.cargando))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.Fj,l.nD,l.Q7,h.O5],styles:[""]}),o})();function Re(o,n){1&o&&t._UZ(0,"app-loadingmobile")}function Ee(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog()}),t._UZ(2,"i",5),t.qZA(),t.qZA()}}function Me(o,n){if(1&o&&(t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"div",8),t.TgZ(3,"div",9),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",10),t.TgZ(7,"p",11),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div",12),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(4),t.Oqu(t.xi3(5,3,e.FechaRegistro,"fullDate")),t.xp6(4),t.Oqu(e.Detalle),t.xp6(2),t.Oqu(e.Monto)}}let Oe=(()=>{class o{constructor(e,i){this.dialog=e,this.service=i,this.cargandoTransacciones=!1,this.listaTransacciones=[]}ngOnInit(){this.cargarTransacciones()}cargarTransacciones(){var e=this;return(0,b.Z)(function*(){e.cargandoTransacciones=!0;const i=yield e.service.get(`transaccion/getTransacciones/${e.idUbicacion}`);200===i.status?e.listaTransacciones=i.body:e.service.eject(),e.cargandoTransacciones=!1})()}openDialog(){this.dialog.open(Ie,{width:"80%",data:{idUbicacion:this.idUbicacion}}).afterClosed().subscribe(i=>{i&&this.cargarTransacciones()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.uw),t.Y36(C.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-transaccionesmobile"]],inputs:{idUbicacion:"idUbicacion"},decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["transacciones",""],["class","row m-2 animate__animated animate__fadeIn",4,"ngFor","ngForOf"],[1,"d-grid","gap-2","col-6","mx-auto","mt-1","animate__animated","animate__fadeIn"],["type","button",1,"btn","btn-dark",3,"click"],[1,"bi","bi-plus-circle-fill"],[1,"row","m-2","animate__animated","animate__fadeIn"],[1,"col"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-text"],[1,"card-footer","fw-bold","text-center"]],template:function(e,i){if(1&e&&(t.YNc(0,Re,1,0,"app-loadingmobile",0),t.YNc(1,Ee,3,0,"ng-template",null,1,t.W1O),t.YNc(3,Me,11,6,"div",2)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.cargandoTransacciones)("ngIfElse",s),t.xp6(3),t.Q6J("ngForOf",i.listaTransacciones)}},directives:[h.O5,h.sg,M],pipes:[h.uU],styles:[""]}),o})();function qe(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA()),2&o){const e=n.$implicit,i=n.index,s=t.oxw();t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(t.xi3(5,3,s.barChartData.datasets[0].data[i],"1.0-2")),t.xp6(3),t.Oqu(t.xi3(8,6,s.barChartData.datasets[1].data[i],"1.0-2"))}}function Le(o,n){1&o&&(t.TgZ(0,"div",12),t._UZ(1,"div",13),t.qZA())}const Ue=function(o){return{"table-info":o}};function Be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(3).irACliente(a)}),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("ngClass",t.VKq(3,Ue,e.Pagado)),t.xp6(2),t.Oqu(e.Cliente.NombreCompleto),t.xp6(2),t.Oqu(e.Monto)}}function Ne(o,n){if(1&o&&(t.TgZ(0,"table",2),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th",3),t._uU(4,"Cliente"),t.qZA(),t.TgZ(5,"th",3),t._uU(6,"Cantidad"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"tbody"),t.YNc(8,Be,5,5,"tr",16),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.clientesPrestamosPorDia)}}function je(o,n){1&o&&(t.TgZ(0,"h3",18),t._uU(1,"No hay prestamos registrados"),t.qZA())}function Fe(o,n){if(1&o&&(t.TgZ(0,"h3",18),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.error)}}function Je(o,n){if(1&o&&(t.YNc(0,Ne,9,1,"table",14),t.YNc(1,je,2,0,"h3",15),t.YNc(2,Fe,2,1,"h3",15)),2&o){const e=t.oxw();t.Q6J("ngIf",0!=e.clientesPrestamosPorDia.length),t.xp6(1),t.Q6J("ngIf",0==e.clientesPrestamosPorDia.length&&!e.error),t.xp6(1),t.Q6J("ngIf",e.error)}}let Ye=(()=>{class o{constructor(e,i,s){this.service=e,this.datePipe=i,this.router=s,this.barChartOptions={responsive:!0,plugins:{legend:{display:!0}}},this.barChartType="bar",this.barChartData={labels:["L","M","M","J","V","S","D"],datasets:[{data:[0,0,0,0,0,0,0],label:"Cobrado",backgroundColor:"#0dcaf0"},{data:[0,0,0,0,0,0,0],label:"Prestado",backgroundColor:"#FF7676"}]},this.dias=[],this.totalCobrado=0,this.totalPrestado=0,this.fechaMaxima=new Date,this.fechaMinima=new Date("2022-01-02"),this.loading=!1,this.clientesPrestamosPorDia=[],this.error=""}ngOnInit(){var e=this;return(0,b.Z)(function*(){e.service.get(`stats/getcobros/${e.idUbicacion}`).then(i=>{var s;e.barChartData.labels=e.dias=i.body.map(a=>{const r=a.Fecha.slice(0,-1);return e.datePipe.transform(r,"EEEEEE")}),e.barChartData.datasets[0].data=i.body.map(a=>(e.totalCobrado+=a.Monto,a.Monto)),null===(s=e.chart)||void 0===s||s.update()}),e.service.get(`stats/getprestamos/${e.idUbicacion}`).then(i=>{var s;e.barChartData.datasets[1].data=i.body.map(a=>(e.totalPrestado+=a.Monto,a.Monto)),null===(s=e.chart)||void 0===s||s.update()})})()}cambioFecha(e){var i=this;return(0,b.Z)(function*(){var s;i.loading=!0;const a=null===(s=e.value)||void 0===s?void 0:s.toISOString(),r=yield i.service.post("stats/getprestamoporfecha",{idUbicacion:i.idUbicacion,fecha:a});200===r.status?i.clientesPrestamosPorDia=r.body.map(c=>(c.Pagado&&(c.Cliente.NombreCompleto=c.Cliente.NombreCompleto.split("-")[0]+" (Pagado)"),c)):(i.clientesPrestamosPorDia=[],i.error="Ocurrio un error. Intenta nuevamente"),i.loading=!1})()}irACliente(e){e.Pagado||this.router.navigate([`/index/worker/mobile/customer/${e.Cliente.Id}`])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j),t.Y36(h.uU),t.Y36(y.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-estadisticasmobile"]],viewQuery:function(e,i){if(1&e&&t.Gf(F.jh,5),2&e){let s;t.iGM(s=t.CRH())&&(i.chart=s.first)}},inputs:{idUbicacion:"idUbicacion"},decls:32,vars:12,consts:[[2,"display","block"],["baseChart","",3,"data","options","type"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["appearance","fill",2,"width","100%"],["matInput","","disabled","",3,"matDatepicker","max","min","dateChange"],["matSuffix","",3,"for"],["touchUi","","disabled","false"],["picker",""],["class","d-flex justify-content-center mb-3",4,"ngIf","ngIfElse"],["listaPrestamos",""],[1,"d-flex","justify-content-center","mb-3"],["role","status",1,"spinner-border","text-info"],["class","table table-striped",4,"ngIf"],["class","text-center",4,"ngIf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div"),t.TgZ(2,"div",0),t._UZ(3,"canvas",1),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"table",2),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th",3),t._uU(8,"Dia"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Cobrado"),t.qZA(),t.TgZ(11,"th",3),t._uU(12,"Prestado"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,qe,9,9,"tr",4),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._uU(17," TOTAL "),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"mat-form-field",5),t.TgZ(23,"mat-label"),t._uU(24,"Prestamos por dia"),t.qZA(),t.TgZ(25,"input",6),t.NdJ("dateChange",function(a){return i.cambioFecha(a)}),t.qZA(),t._UZ(26,"mat-datepicker-toggle",7),t._UZ(27,"mat-datepicker",8,9),t.qZA(),t.YNc(29,Le,2,0,"div",10),t.YNc(30,Je,3,3,"ng-template",null,11,t.W1O)),2&e){const s=t.MAs(28),a=t.MAs(31);t.xp6(3),t.Q6J("data",i.barChartData)("options",i.barChartOptions)("type",i.barChartType),t.xp6(11),t.Q6J("ngForOf",i.dias),t.xp6(5),t.hij(" ",i.totalCobrado," "),t.xp6(2),t.hij(" ",i.totalPrestado," "),t.xp6(4),t.Q6J("matDatepicker",s)("max",i.fechaMaxima)("min",i.fechaMinima),t.xp6(1),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",i.loading)("ngIfElse",a)}},directives:[F.jh,h.sg,N.KE,N.hX,At.Nt,B.hl,B.nW,N.R9,B.Mq,h.O5,h.mk],pipes:[h.JJ],styles:[".mat-calendar-body-selected{border-radius:100%!important;color:#000!important;background-color:#0dcaf0!important}  .mat-calendar-body-cell-container>.mat-calendar-body-active{border-radius:100%!important;color:#000!important;background-color:#0dcaf0!important}"]}),o})();function He(o,n){1&o&&t._UZ(0,"app-loadingmobile")}function Qe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"app-listaclientesmobile",13),t.NdJ("scrolling",function(s){return t.CHM(e),t.oxw(2).scroll(s)})("clienteAgregado",function(s){return t.CHM(e),t.oxw(2).refresh(s)}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("cardHeight",e.containerHeight)("idUbicacion",e.id)("listaClientes",e.ubicacion.lCliente)}}function ze(o,n){if(1&o&&t._UZ(0,"app-transaccionesmobile",14),2&o){const e=t.oxw(2);t.Q6J("idUbicacion",e.ubicacion.Id)}}function Ve(o,n){if(1&o&&t._UZ(0,"app-estadisticasmobile",14),2&o){const e=t.oxw(2);t.Q6J("idUbicacion",e.ubicacion.Id)}}const W=function(o,n){return{"btn-outline-info":o,"btn-info":n}};function Ge(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"h1",5),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t.TgZ(8,"label",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeMenu("listaClientes")}),t._uU(9,"Clientes"),t.qZA(),t.TgZ(10,"label",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeMenu("transacciones")}),t._uU(11,"Transacciones"),t.qZA(),t.TgZ(12,"label",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeMenu("estadisticas")}),t._uU(13,"Estad\xedsticas"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t.YNc(16,Qe,1,3,"app-listaclientesmobile",11),t.YNc(17,ze,1,1,"app-transaccionesmobile",12),t.YNc(18,Ve,1,1,"app-estadisticasmobile",12),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.Oqu(e.ubicacion.Nombre),t.xp6(4),t.Q6J("ngClass",t.WLB(9,W,!e.menu[0],e.menu[0])),t.xp6(2),t.Q6J("ngClass",t.WLB(12,W,!e.menu[1],e.menu[1])),t.xp6(2),t.Q6J("ngClass",t.WLB(15,W,!e.menu[2],e.menu[2])),t.xp6(2),t.Udp("height",e.containerHeight,"px"),t.xp6(2),t.Q6J("ngIf",e.menu[0]),t.xp6(1),t.Q6J("ngIf",e.menu[1]),t.xp6(1),t.Q6J("ngIf",e.menu[2])}}let $e=(()=>{class o{constructor(e,i){this.http=e,this.params=i,this.containerHeight=.7*window.innerHeight,this.menu=[!0,!1,!1],this.cargandoUbicacion=!0,this.ubicacion=[]}ngOnInit(){var e=this;return(0,b.Z)(function*(){e.cargandoUbicacion=!0,e.id=e.params.snapshot.params.id;const i=yield e.http.get(`Cliente/porUbicacion/${e.id}`);200===i.status?e.ubicacion=i.body:e.http.eject(),e.cargandoUbicacion=!1})()}scroll(e){let i=document.getElementById("listaScroll");i.scrollTop=i.scrollTop+(e?2:-2)}changeMenu(e){switch(e){case"listaClientes":this.menu=[!0,!1,!1];break;case"transacciones":this.menu=[!1,!0,!1];break;case"estadisticas":this.menu=[!1,!1,!0]}}refresh(e){this.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j),t.Y36(y.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-location"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["Ubicacion",""],[1,"m-2","animate__animated","animate__fadeIn"],[1,"row"],[1,"col"],[1,"text-center","text-white"],[1,"col","text-center"],["role","group",1,"btn-group"],[1,"btn",3,"ngClass","click"],["id","listaScroll",1,"row","mt-2","overflow-scroll","card","border-info"],[1,"col","p-0"],[3,"cardHeight","idUbicacion","listaClientes","scrolling","clienteAgregado",4,"ngIf"],[3,"idUbicacion",4,"ngIf"],[3,"cardHeight","idUbicacion","listaClientes","scrolling","clienteAgregado"],[3,"idUbicacion"]],template:function(e,i){if(1&e&&(t.YNc(0,He,1,0,"app-loadingmobile",0),t.YNc(1,Ge,19,18,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.cargandoUbicacion)("ngIfElse",s)}},directives:[h.O5,M,h.mk,Ae,Oe,Ye],styles:[".card[_ngcontent-%COMP%]{background-color:#dce2e7}"]}),o})();function We(o,n){1&o&&t._UZ(0,"span",15)}let Ke=(()=>{class o{constructor(e,i,s,a){this.fb=e,this.service=i,this.dialogRef=s,this.data=a,this.formValid=!1,this.agregando=!1,this.form=this.fb.group({monto:[,l.kI.pattern("[0-9]+$")],interes:[20],plazoEnDias:[24]}),this.cuota=0,this.form.valueChanges.subscribe(()=>{const r=parseInt(this.form.controls.monto.value);r&&0!=r&&r%100==0?(this.cuota=(r+r*(this.form.controls.interes.value/100))/this.form.controls.plazoEnDias.value,this.formValid=!0):(this.cuota=0,this.formValid=!1)})}ngOnInit(){}agregarCuenta(){var e=this;return(0,b.Z)(function*(){200===(e.dialogRef.disableClose=!0,e.agregando=!0,(yield e.service.post("prestamo/registrar",{idCliente:e.data.idCliente,monto:e.form.controls.monto.value,interes:e.form.controls.interes.value,plazoEnDias:e.form.controls.plazoEnDias.value,cuotaDiaria:e.cuota})).status)?e.dialogRef.close(!0):e.service.eject()})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(C.j),t.Y36(_.so),t.Y36(_.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-agregarcuentamobile-dialog"]],decls:26,vars:7,consts:[[1,"text-info","text-center"],[3,"formGroup"],["formControlName","plazoEnDias",1,"form-select","mb-2","border-info"],["value","24"],["value","30"],["type","text","id","exampleFormControlInput1","placeholder","Cantidad","formControlName","monto","maxlength","5","autocomplete","off","required","",1,"form-control","border-info","mb-2"],["formControlName","interes",1,"form-select","mb-2","border-info"],["value","5"],["value","10"],["value","15"],["value","20"],[1,"text-white"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Agregar cuenta"),t.qZA(),t._UZ(2,"br"),t.TgZ(3,"form",1),t.TgZ(4,"select",2),t.TgZ(5,"option",3),t._uU(6,"24 d\xedas"),t.qZA(),t.TgZ(7,"option",4),t._uU(8,"30 d\xedas"),t.qZA(),t.qZA(),t._UZ(9,"input",5),t.TgZ(10,"select",6),t.TgZ(11,"option",7),t._uU(12,"5%"),t.qZA(),t.TgZ(13,"option",8),t._uU(14,"10%"),t.qZA(),t.TgZ(15,"option",9),t._uU(16,"15%"),t.qZA(),t.TgZ(17,"option",10),t._uU(18,"20%"),t.qZA(),t.qZA(),t.TgZ(19,"h3",11),t._uU(20),t.ALo(21,"number"),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"button",13),t.NdJ("click",function(){return i.agregarCuenta()}),t.YNc(24,We,1,0,"span",14),t._uU(25," Agregar "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(17),t.hij("Cuota: ",t.xi3(21,4,i.cuota,"1.0-2"),""),t.xp6(3),t.Q6J("disabled",!i.formValid),t.xp6(1),t.Q6J("ngIf",i.agregando))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.Fj,l.nD,l.Q7,h.O5],pipes:[h.JJ],styles:[""]}),o})();function Xe(o,n){1&o&&(t.TgZ(0,"p",5),t._uU(1,"La informaci\xf3n del cliente no se eliminar\xe1 por si deseas agregar un pr\xe9stamo en el futuro"),t.qZA())}function ti(o,n){1&o&&t._UZ(0,"span",6)}let ei=(()=>{class o{constructor(e,i,s){this.service=e,this.dialogRef=i,this.data=s,this.eliminando=!1}ngOnInit(){}eliminarTarjeta(){var e=this;return(0,b.Z)(function*(){200===(e.dialogRef.disableClose=!0,e.eliminando=!0,(yield e.service.get(`prestamo/delete/${e.data.id}`)).status)?e.dialogRef.close(!0):(e.dialogRef.close(),e.service.eject())})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j),t.Y36(_.so),t.Y36(_.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-eliminarcuentamobile-dialog"]],decls:7,vars:3,consts:[[1,"text-info","text-center"],["class","text-white",4,"ngIf"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"text-white"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Eliminar tarjeta?"),t.qZA(),t.YNc(2,Xe,2,0,"p",1),t.TgZ(3,"div",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return i.eliminarTarjeta()}),t.YNc(5,ti,1,0,"span",4),t._uU(6," Eliminar"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.data.unique),t.xp6(2),t.Q6J("disabled",i.eliminando),t.xp6(1),t.Q6J("ngIf",i.eliminando))},directives:[h.O5],styles:[""]}),o})();function ii(o,n){1&o&&t._UZ(0,"span",7)}const ni=function(o){return{"is-invalid":o}};let oi=(()=>{class o{constructor(e,i,s,a){this.data=e,this.dialogRef=i,this.service=s,this.fb=a,this.valor="",this.modificandoCliente=!1,this.form=this.fb.group({nombreCompleto:[,l.kI.pattern("^[a-zA-Z0-9]+(?: [a-zA-Z0-9]+)*$")],direccion:[],telefono:[,l.kI.pattern("^[0-9]*$")]}),this.err400=!1}ngOnInit(){this.form.controls.nombreCompleto.setValue(this.data.objCliente.NombreCompleto),this.form.controls.direccion.setValue(this.data.objCliente.Direccion),this.form.controls.telefono.setValue(this.data.objCliente.Telefono)}modificarCliente(){var e=this;return(0,b.Z)(function*(){e.modificandoCliente=!0,e.dialogRef.disableClose=!0;const i={Id:e.data.objCliente.Id,NombreCompleto:e.form.controls.nombreCompleto.value,Direccion:e.form.controls.direccion.value,Telefono:e.form.controls.telefono.value,IdUbicacion:e.data.objCliente.IdUbicacion};switch((yield e.service.post("cliente/editar",i)).status){case 200:e.dialogRef.close(i);break;case 400:e.err400=!0,e.dialogRef.disableClose=!1,e.modificandoCliente=!1;break;default:e.service.eject()}})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.WI),t.Y36(_.so),t.Y36(C.j),t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modificarclientemobile-dialo"]],decls:8,vars:6,consts:[[3,"formGroup"],["type","text","placeholder","Nombre","formControlName","nombreCompleto","required","",1,"form-control","border-info","mb-2",3,"ngClass"],["type","text","placeholder","Tel\xe9fono","formControlName","telefono",1,"form-control","border-info","mb-2"],["type","text","placeholder","Direcci\xf3n","formControlName","direccion",1,"form-control","border-info","mb-2"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"input",1),t._UZ(2,"input",2),t._UZ(3,"input",3),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"button",5),t.NdJ("click",function(){return i.modificarCliente()}),t.YNc(6,ii,1,0,"span",6),t._uU(7," Confirmar cambios"),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngClass",t.VKq(4,ni,i.err400)),t.xp6(4),t.Q6J("disabled",i.modificandoCliente||i.form.invalid),t.xp6(1),t.Q6J("ngIf",i.modificandoCliente))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.Q7,h.mk,h.O5],styles:[""]}),o})();function si(o,n){1&o&&t._UZ(0,"span",6)}function ai(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("( ",e.contador," )")}}let ri=(()=>{class o{constructor(e,i,s){this.service=e,this.dialogRef=i,this.data=s,this.contador=5,this.borrando=!1}ngOnInit(){this.reducirContador()}reducirContador(){setTimeout(()=>{this.contador>0&&(this.contador--,this.reducirContador())},1e3)}borrar(){var e=this;return(0,b.Z)(function*(){e.borrando=!0,e.dialogRef.disableClose=!0;const i=yield e.service.get(`cliente/delete/${e.data.id}`);200===i.status?e.dialogRef.close(!0):(console.log(i),e.service.eject())})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j),t.Y36(_.so),t.Y36(_.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-eliminarclientemobile-dialog"]],decls:9,vars:3,consts:[[1,"text-info","text-center"],[1,"text-white"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"h3",0),t._uU(1,"Eliminar cliente?"),t.qZA(),t.TgZ(2,"p",1),t._uU(3,"Esta acci\xf3n no se puede deshacer"),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.borrar()}),t.YNc(6,si,1,0,"span",4),t._uU(7," Borrar "),t.YNc(8,ai,2,1,"span",5),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("disabled",i.contador>0||i.borrando),t.xp6(1),t.Q6J("ngIf",i.borrando),t.xp6(2),t.Q6J("ngIf",i.contador>0))},directives:[h.O5],styles:[""]}),o})();var j=m(7887);function ci(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"Mostrar Mapa"),t.qZA())}function li(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleMapa()}),t.YNc(2,ci,2,0,"span",5),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.mostrarMapa)}}function di(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelarModificar()}),t._uU(3," Cancelar "),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",e.loadingPosition||e.updatingPosition)}}function pi(o,n){1&o&&t._UZ(0,"span",16)}function hi(o,n){1&o&&t._UZ(0,"i",17)}function mi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).getPosition()}),t.YNc(3,pi,1,0,"span",12),t.YNc(4,hi,1,0,"i",15),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",e.loadingPosition||e.updatingPosition),t.xp6(1),t.Q6J("ngIf",e.loadingPosition),t.xp6(1),t.Q6J("ngIf",!e.loadingPosition)}}function ui(o,n){1&o&&t._UZ(0,"span",16)}function gi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",0),t.YNc(2,di,4,1,"div",8),t.YNc(3,mi,5,3,"div",8),t.TgZ(4,"div",9),t.TgZ(5,"div",10),t.TgZ(6,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().modificar()}),t.YNc(7,ui,1,0,"span",12),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.modificandoUbicacion),t.xp6(1),t.Q6J("ngIf",e.modificandoUbicacion),t.xp6(3),t.Q6J("disabled",e.loadingPosition||e.updatingPosition),t.xp6(1),t.Q6J("ngIf",e.updatingPosition),t.xp6(1),t.hij(" ",e.modificandoUbicacion?e.updatingPosition?"":"Guardar":"Modificar Ubicacion"," ")}}const _i=function(o){return{height150:o}},fi=function(o){return{wehe100:o}};let bi=(()=>{class o{constructor(e){this.service=e,this.loadingPosition=!1,this.mostrarMapa=!1,this.modificandoUbicacion=!1,this.updatingPosition=!1}ngOnInit(){this.marker=new j.Marker({draggable:!1,color:"#79FF76"})}createMap(){j.accessToken="pk.eyJ1Ijoia3lvdXV1a28iLCJhIjoiY2wwbTZzcGJyMTNiODNob3Rnaml6dWpjeSJ9.2hy6OAlfjvKHKWhbjGTjrw",this.map=new j.Map({container:"mapa",style:"mapbox://styles/mapbox/streets-v11",center:[this.lng,this.lat],zoom:15}),this.createMarter(this.lng,this.lat)}toggleMapa(){this.mostrarMapa=!this.mostrarMapa,this.mostrarMapa&&this.createMap()}getPosition(){navigator.geolocation?(this.loadingPosition=!0,navigator.geolocation.getCurrentPosition(e=>{this.map.setCenter([e.coords.longitude,e.coords.latitude]),this.map.setZoom(15),this.marker.setLngLat([e.coords.longitude,e.coords.latitude]),this.loadingPosition=!1},e=>{alert("No podemos acceder a tu ubicacion porque no has otorgado los permisos necesarios"),this.loadingPosition=!1})):alert("Contacta con un administrador")}createMarter(e,i){this.marker=new j.Marker({draggable:!1}).setLngLat([e,i]).addTo(this.map)}modificar(){var e=this;return(0,b.Z)(function*(){if(e.modificandoUbicacion){const{lat:i,lng:s}=e.marker.getLngLat();e.lat=i,e.lng=s,e.updatingPosition=!0,yield e.service.post("cliente/establecerubicacion",{idCliente:e.idCliente,Latitud:i,Longitud:s}),e.map.setCenter([s,i]),e.updatingPosition=!1}e.modificandoUbicacion=!e.modificandoUbicacion,e.marker.setDraggable(e.modificandoUbicacion)})()}cancelarModificar(){this.modificandoUbicacion=!1,this.marker.setDraggable(!1),this.marker.setLngLat([this.lng,this.lat]),this.map.setCenter([this.lng,this.lat])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mapmobile"]],inputs:{lat:"lat",lng:"lng",idCliente:"idCliente"},decls:6,vars:8,consts:[[1,"row"],[1,"col","mb-2"],[1,"card","card","text-white","bg-dark","border","border-info","rounded-3",3,"ngClass"],["class","d-grid gap-2 m-1",4,"ngIf"],["id","mapa",3,"ngClass"],[4,"ngIf"],[1,"d-grid","gap-2","m-1"],["type","button",1,"btn","btn-info",3,"click"],["class","col m-1",4,"ngIf"],[1,"col","m-1"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-success",3,"disabled","click"],["class","bi bi-pin-map-fill",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],[1,"bi","bi-pin-map-fill"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,li,3,1,"div",3),t._UZ(4,"div",4),t.YNc(5,gi,9,5,"div",5),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngClass",t.VKq(4,_i,i.mostrarMapa)),t.xp6(1),t.Q6J("ngIf",!i.mostrarMapa),t.xp6(1),t.Q6J("ngClass",t.VKq(6,fi,i.mostrarMapa)),t.xp6(1),t.Q6J("ngIf",i.mostrarMapa))},directives:[h.mk,h.O5],styles:[".wehe100[_ngcontent-%COMP%]{width:100%;height:100%}.height150[_ngcontent-%COMP%]{height:230px}"]}),o})();function vi(o,n){1&o&&t._UZ(0,"span",8)}function Ci(o,n){1&o&&(t.TgZ(0,"p",0),t._uU(1,"El abono no puede ser igual o mayor a la cuota diaria. Si deseas completar la cuota cierra esta ventana y agrega una cuota nueva, se restar\xe1 el abono autom\xe1ticamente."),t.qZA())}let Di=(()=>{class o{constructor(e,i,s,a){this.data=e,this.dialogRef=i,this.service=s,this.fb=a,this.abonando=!1,this.abonoNuevo=0,this.cantidadValida=!0,this.form=this.fb.group({cantidad:["",l.kI.pattern("^[0-9]+$")]})}ngOnInit(){this.form.valueChanges.subscribe(()=>{this.form.controls.cantidad.valid?(this.abonoNuevo=parseInt(this.form.controls.cantidad.value),this.cantidadValida=!(this.abonoNuevo+this.data.cant>=this.data.cuotaDiaria)):this.abonoNuevo=0})}abonar(){var e=this;return(0,b.Z)(function*(){200===(e.abonando=!0,e.dialogRef.disableClose=!0,(yield e.service.post("abono/registrar",{idPrestamo:e.data.idPrestamo,Cantidad:e.abonoNuevo})).status)?e.dialogRef.close(e.abonoNuevo):e.service.eject()})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.WI),t.Y36(_.so),t.Y36(C.j),t.Y36(l.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-abonadomobile-dialog"]],decls:17,vars:6,consts:[[1,"text-white"],[1,"text-info"],[3,"formGroup"],["type","text","id","exampleFormControlInput1","placeholder","Cantidad","maxlength","5","autocomplete","off","required","","formControlName","cantidad",1,"form-control","border-info","mb-3"],[1,"d-grid","gap-2"],[1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],["class","text-white",4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"p"),t.TgZ(1,"span",0),t._uU(2,"Total abonado ahora: "),t.qZA(),t.TgZ(3,"span",1),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"span",0),t._uU(7,"Total abonado despues: "),t.qZA(),t.TgZ(8,"span",1),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"form",2),t._UZ(11,"input",3),t.TgZ(12,"div",4),t.TgZ(13,"button",5),t.NdJ("click",function(){return i.abonar()}),t.YNc(14,vi,1,0,"span",6),t._uU(15," Agregar "),t.qZA(),t.qZA(),t.qZA(),t.YNc(16,Ci,2,0,"p",7)),2&e&&(t.xp6(4),t.Oqu(i.data.cant),t.xp6(5),t.Oqu(i.abonoNuevo+i.data.cant),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("disabled",i.form.invalid||0==i.form.controls.cantidad.value||!i.cantidadValida||i.abonando),t.xp6(1),t.Q6J("ngIf",i.abonando),t.xp6(2),t.Q6J("ngIf",!i.cantidadValida))},directives:[l._Y,l.JL,l.sg,l.Fj,l.nD,l.Q7,l.JJ,l.u,h.O5],styles:[""]}),o})();const Ti=["tablaCuotas"];function xi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"i",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().eliminar()}),t.qZA()}}const ki=function(o,n){return{"btn-info":o,"btn-success":n}};function yi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",7),t.TgZ(2,"button",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(3).seleccionarCuotas(a)}),t._uU(3),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,i=t.oxw(3);t.xp6(2),t.Q6J("disabled",e<=i.cuotasPagadas)("ngClass",t.WLB(3,ki,e<=i.cuotasPagadas,e>i.cuotasPagadas&&e<=i.cuotasSeleccionadas)),t.xp6(1),t.Oqu(e)}}function Zi(o,n){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,yi,4,6,"td",19),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function wi(o,n){if(1&o&&(t.TgZ(0,"table",17,18),t.YNc(2,Zi,2,1,"tr",19),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.rows)}}function Si(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(t.xi3(3,2,e.FechaRegistro,"MMM d, h:mm a")),t.xp6(3),t.Oqu(e.CantCuota)}}function Ai(o,n){if(1&o&&(t.TgZ(0,"table",24),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th",25),t._uU(4,"Dia"),t.qZA(),t.TgZ(5,"th",25),t._uU(6,"Cuotas"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"tbody"),t.YNc(8,Si,6,5,"tr",19),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.prestamo.Cobro)}}function Pi(o,n){1&o&&(t.TgZ(0,"h3",26),t._uU(1,"Sin registros"),t.qZA())}const Ii=function(o){return{height:o}};function Ri(o,n){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,Ai,9,1,"table",22),t.YNc(2,Pi,2,0,"ng-template",null,23,t.W1O),t.qZA()),2&o){const e=t.MAs(3),i=t.oxw();t.Q6J("ngStyle",t.VKq(3,Ii,i.height)),t.xp6(1),t.Q6J("ngIf",0!=i.prestamo.Cobro.length)("ngIfElse",e)}}function Ei(o,n){1&o&&t._UZ(0,"span",27)}let Mi=(()=>{class o{constructor(e,i){this.service=e,this.dialog=i,this.tarjetaTerminada=new t.vpe,this.eliminarTarjeta=new t.vpe,this.height="0px",this.rows=[[],[],[],[],[],[]],this.cuotasPagadas=0,this.cuotasSeleccionadas=0,this.cuotasAPagar=0,this.fondoAbono=0,this.ventana=!0,this.pagando=!1,this.habilitarBorrado=!1}ngOnInit(){this.fondoAbono=this.prestamo.FondoAbono,this.habilitarBorrado=new Date(this.prestamo.FechaRegistro).setHours(0,0,0,0)==(new Date).setHours(0,0,0,0)&&0==this.prestamo.Cobro.length&&0==this.fondoAbono,this.prestamo.Cobro.forEach(i=>this.cuotasPagadas+=i.CantCuota),this.cuotasSeleccionadas=this.cuotasPagadas;let e=1;for(let i=0;i<6;i++)for(let s=0;s<this.prestamo.PlazoEnDias/6;s++)this.rows[i].push(e++)}ngAfterViewInit(){this.height=this.tabla.nativeElement.offsetHeight+"px"}seleccionarCuotas(e){this.cuotasSeleccionadas=this.cuotasSeleccionadas==e?this.cuotasPagadas:e,this.cuotasAPagar=this.cuotasSeleccionadas-this.cuotasPagadas}cambiarVentana(){this.ventana=!this.ventana}pagarCuotas(){var e=this;return(0,b.Z)(function*(){e.pagando=!0;const i=yield e.service.post("cobro/registrar",{idPrestamo:e.prestamo.Id,cantCuota:e.cuotasAPagar});200===i.status?(e.habilitarBorrado=!1,e.prestamo.Cobro.push({FechaRegistro:i.body.Message,CantCuota:e.cuotasAPagar}),e.cuotasPagadas=e.cuotasSeleccionadas,e.cuotasPagadas==e.prestamo.PlazoEnDias&&e.tarjetaTerminada.emit(e.index),e.cuotasAPagar=0):e.service.eject(),e.fondoAbono=0,e.pagando=!1})()}eliminar(){this.eliminarTarjeta.emit(this.prestamo.Id)}abonado(){this.dialog.open(Di,{width:"80%",data:{cant:this.fondoAbono,idPrestamo:this.prestamo.Id,cuotaDiaria:this.prestamo.CuotaDiaria}}).afterClosed().subscribe(i=>{i&&(this.fondoAbono+=i,this.habilitarBorrado=!1)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j),t.Y36(_.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tarjetamobile"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ti,5),2&e){let s;t.iGM(s=t.CRH())&&(i.tabla=s.first)}},inputs:{prestamo:"prestamo",index:"index"},outputs:{tarjetaTerminada:"tarjetaTerminada",eliminarTarjeta:"eliminarTarjeta"},decls:25,vars:20,consts:[[1,"card","text-white","border","border-info","rounded-3"],[1,"card-body","text-center","text-dark"],["class","bi bi-trash delete",3,"click",4,"ngIf"],[1,"card-title"],[1,"fw-lighter"],["class","table table-borderless",4,"ngIf","ngIfElse"],["registro",""],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-info",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col-4"],["type","email","disabled","true",1,"form-control",3,"value"],[1,"col-8","d-grid","gap-2"],["type","button",1,"btn","btn-warning",3,"click"],[1,"bi","bi-trash","delete",3,"click"],[1,"table","table-borderless"],["tablaCuotas",""],[4,"ngFor","ngForOf"],["type","button",1,"btn",3,"disabled","ngClass","click"],[1,"card","mb-3","overflow-scroll",3,"ngStyle"],["class","table",4,"ngIf","ngIfElse"],["sinRegistros",""],[1,"table"],["scope","col"],[1,"text-center","mt-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,xi,1,0,"i",2),t.TgZ(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"p",4),t._uU(6),t.ALo(7,"date"),t.ALo(8,"number"),t.qZA(),t.YNc(9,wi,3,1,"table",5),t.YNc(10,Ri,4,5,"ng-template",null,6,t.W1O),t.TgZ(12,"div",7),t.TgZ(13,"button",8),t.NdJ("click",function(){return i.pagarCuotas()}),t.YNc(14,Ei,1,0,"span",9),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){return i.cambiarVentana()}),t._uU(18),t.qZA(),t.TgZ(19,"div",11),t.TgZ(20,"div",12),t._UZ(21,"input",13),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"button",15),t.NdJ("click",function(){return i.abonado()}),t._uU(24,"Abonado"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const s=t.MAs(11);t.xp6(2),t.Q6J("ngIf",i.habilitarBorrado),t.xp6(2),t.Oqu(i.prestamo.Monto),t.xp6(2),t.AsE("",t.xi3(7,11,i.prestamo.FechaRegistro,"mediumDate")," - Cuota: ",t.xi3(8,14,i.prestamo.CuotaDiaria,"1.0-2"),""),t.xp6(3),t.Q6J("ngIf",i.ventana)("ngIfElse",s),t.xp6(4),t.Q6J("disabled",0==i.cuotasAPagar||!i.ventana||i.pagando),t.xp6(1),t.Q6J("ngIf",i.pagando),t.xp6(1),t.hij(" Pagar ",0!=i.cuotasAPagar?t.xi3(16,17,i.cuotasAPagar*i.prestamo.CuotaDiaria-i.fondoAbono,"1.0-2"):""," "),t.xp6(3),t.hij(" ",i.ventana?"Registro":"Cuotas"," "),t.xp6(3),t.Q6J("value",i.fondoAbono)}},directives:[h.O5,h.sg,h.mk,h.PC],pipes:[h.uU,h.JJ],styles:[".card[_ngcontent-%COMP%]{background-color:#dce2e7}"]}),o})();function Oi(o,n){1&o&&t._UZ(0,"app-loadingmobile")}function qi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).borrarCliente()}),t._UZ(1,"i",21),t.qZA()}}function Li(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"span",22),t.TgZ(1,"i",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openWpp()}),t.qZA(),t.qZA()}}function Ui(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",24),t.TgZ(2,"app-tarjetamobile",25),t.NdJ("tarjetaTerminada",function(s){return t.CHM(e),t.oxw(2).terminoTarjeta(s)})("eliminarTarjeta",function(s){return t.CHM(e),t.oxw(2).eliminarCuenta(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,i=n.index;t.xp6(2),t.Q6J("index",i)("prestamo",e)}}function Bi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t.TgZ(4,"div",6),t.TgZ(5,"span",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().modificarCliente(1)}),t._UZ(6,"i",8),t.qZA(),t.YNc(7,qi,2,0,"span",9),t.TgZ(8,"h5",10),t._uU(9),t.qZA(),t.TgZ(10,"ul",11),t.TgZ(11,"li",12),t.TgZ(12,"span",13),t._uU(13,"Direcci\xf3n: "),t.qZA(),t.TgZ(14,"span",14),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"li",12),t.TgZ(17,"span",13),t._uU(18,"Tel\xe9fono: "),t.TgZ(19,"span",14),t._uU(20),t.qZA(),t.YNc(21,Li,2,0,"span",15),t.qZA(),t.qZA(),t.TgZ(22,"li",12),t.TgZ(23,"span",13),t._uU(24,"Fecha de registro: "),t.TgZ(25,"span",14),t._uU(26),t.ALo(27,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",16),t.TgZ(29,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().agregarCuenta()}),t._uU(30,"Agregar cuenta"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(31,"app-mapmobile",18),t.YNc(32,Ui,3,2,"div",19),t.qZA()}if(2&o){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.canDeleteCustomer),t.xp6(2),t.Oqu(e.cliente.NombreCompleto),t.xp6(6),t.hij(" ",e.cliente.Direccion||"Ninguna"," "),t.xp6(5),t.hij(" ",e.cliente.Telefono||"Ninguno"," "),t.xp6(1),t.Q6J("ngIf",8==(null==e.cliente.Telefono?null:e.cliente.Telefono.length)),t.xp6(5),t.hij(" ",t.xi3(27,10,e.cliente.FechaRegistro,"mediumDate")," "),t.xp6(5),t.Q6J("lat",e.cliente.Latitud||-17.7831412431951)("lng",e.cliente.Longitud||-63.182164782448034)("idCliente",e.cliente.Id),t.xp6(1),t.Q6J("ngForOf",e.cliente.Prestamo)}}let Ni=(()=>{class o{constructor(e,i,s,a){this.http=e,this.params=i,this.dialog=s,this.router=a,this.cargandoCliente=!0,this.canDeleteCustomer=!1}ngOnInit(){var e=this;return(0,b.Z)(function*(){e.cargandoCliente=!0;const{id:i}=e.params.snapshot.params,s=yield e.http.get(`cliente/getcliente/${i}`);200===s.status?e.cliente=s.body:e.http.eject(),e.canDeleteCustomer=0==e.cliente.Prestamo.length,e.cargandoCliente=!1})()}openWpp(){window.open(`https://api.whatsapp.com/send/?phone=591${this.cliente.Telefono}&text&app_absent=0`)}agregarCuenta(){this.dialog.open(Ke,{width:"80%",data:{idCliente:this.cliente.Id}}).afterClosed().subscribe(i=>{i&&this.ngOnInit()})}eliminarCuenta(e){this.dialog.open(ei,{width:"80%",data:{id:e,unique:1==this.cliente.Prestamo.length}}).afterClosed().subscribe(s=>{s&&this.ngOnInit()})}terminoTarjeta(e){var i=this;return(0,b.Z)(function*(){i.cliente.Prestamo.splice(e,1),0==i.cliente.Prestamo.length&&(i.canDeleteCustomer=!0)})()}modificarCliente(e){this.dialog.open(oi,{width:"80%",data:{tipo:e,objCliente:this.cliente}}).afterClosed().subscribe(s=>{s&&(this.cliente.NombreCompleto=s.NombreCompleto,this.cliente.Telefono=s.Telefono,this.cliente.Direccion=s.Direccion)})}borrarCliente(){this.dialog.open(ri,{width:"80%",data:{id:this.cliente.Id,idUbicacion:this.cliente.IdUbicacion}}).afterClosed().subscribe(i=>{i&&this.router.navigate([`/index/worker/mobile/location/${this.cliente.IdUbicacion}`])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.j),t.Y36(y.gz),t.Y36(_.uw),t.Y36(y.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-customer"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["customer",""],[1,"animate__animated","animate__fadeIn"],[1,"row"],[1,"col","mt-2","mb-2"],[1,"card","card","text-white","bg-dark","border","border-info","rounded-3"],[1,"card-body"],[1,"text-white","edit",3,"click"],[1,"bi","bi-pencil-fill"],["class","text-danger delete-customer",3,"click",4,"ngIf"],[1,"card-title","text-info","text-center"],[1,"list-group","list-group-flush","bg-transparent"],[1,"list-group-item","bg-transparent"],[1,"text-white"],[1,"text-info"],["class","text-success",4,"ngIf"],[1,"d-grid","gap-2","col-6","mx-auto"],["type","button",1,"btn","btn-info",3,"click"],[3,"lat","lng","idCliente"],["class","row",4,"ngFor","ngForOf"],[1,"text-danger","delete-customer",3,"click"],[1,"bi","bi-trash","delete"],[1,"text-success"],[1,"bi","bi-whatsapp",3,"click"],[1,"col","mb-4"],[3,"index","prestamo","tarjetaTerminada","eliminarTarjeta"]],template:function(e,i){if(1&e&&(t.YNc(0,Oi,1,0,"app-loadingmobile",0),t.YNc(1,Bi,33,13,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",i.cargandoCliente)("ngIfElse",s)}},directives:[h.O5,M,bi,h.sg,Mi],pipes:[h.uU],styles:[""]}),o})(),ji=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[l.qu],imports:[[h.ez,l.UX,l.u5]]}),o})(),Fi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez]]}),o})();const Ji=[{path:"dashboard",component:Ut},{path:"location/:id",component:$e},{path:"customer/:id",component:Ni}];let Yi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,ge,ji,l.u5,Fi,y.Bz.forChild(Ji)]]}),o})()}}]);